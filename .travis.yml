language: python
warnings_are_errors: false
env:
  DOCKER_COMPOSE_VERSION: 1.24.1
  global:
  - secure: WXbGcbop3myHqaUdfQ4EVfd0yomp2QAAcEVy5eTNWrUKP4vtf+2lFAicdncCheMCUqLq+HFTBails8FOFqT5aGyR8DSm7WqeKc+8F3cXtAusRCz6JMinmREB45RFWRTkY6JQ4yZWx+MoE9Czklyi2Yn4tzD+3aZOqVxpVuIvjwllVGxxqVy97ZcemY9qZO8mogZmzkLrjhA23os3M8Ro+soOvT0QvU+NFYuh+xa9BsLZxtIKGfWKQuEo3NoVGez9FKE1iYTRCculjAI12O0lRQ/sTwjhyPfXC5dn3ozlwaVQFwcHsF+Fk+PfXj39Ox45qmX3pRR5PY4UgUaWgGm47SIkERADil/NhsqrKOlMId8zzAARTltLBWdr8z0pRAWDkOtSqjbBw6wt+wode/h3twtegQ8Echi3iwv94GkoSBNX4xd6IFD4/0DPnUmB5I2zTW5aSFxmVH+75EVu69jTlMz98KLJ3KPtWDL3iTOPTzYXQXtcs4n8XN4TkiLeEFAsS88evPca3goRx8iP595E2wq62Xc1RUZYtYWILz/j9NSE2jz5B7d1kCDc7mwM39u/OajYFGHqVF0I/FzCyj1isslxEm44PneUNqRb+R6wzG/yV4LtSvyBOy9OA3ZVqhsDXRTOOzlmPQ1rCl7UaBeUQJ0JdYxOOClF1jZ8ThI+gsY=
  - secure: t14uNuYef66OR/waeKsxJRAhWxIHXN3wi8ywT/OJkDuV4Ua4vWAcZfx12IXUI9cXJY3ltrJM1ce1/lHNgbl+c75Ylf9Tiqz2MW7sWZx1k6SesGE9Dp48xjqEeZMGi1gy4BO3rwColkFMidQaMmp32We+ckxAlpVteh4RfdPRlmthKs+2osRQieeYihYupWJ4OBsKmbNyw5MuE1Fcac/f3Ql/qHbj08DPWqGxvggq5K5Xck+ba6PYWnIXeV/KRBaToTLAPvANtqJHVRH8/vYsYFtrq5P2JYXsvEsUGsy4WprNffCP7SrJMpcvauuquNaBovvH8Fvbqr6z7dncuDlCskKI72fBkIPxZhb9BignuLk8vV9lCSXyuj7C/TAs5SO4D+g5wiKPYT8Tou+FT8CmK2Sr+zh5Kjg1KN8IMOhdJJfUl58ZkyBc6HSmSXIXSpQhSaIG5RC8ro169/I6K7hQBusBdSVIyBh41LbxdPb2fifCzzZQ6zmuBR1KTmU7GhORUvfWZflZyHSlXT/F9tyofdOlbm/mC834ZEyz+sqva9CiBlBMsrH/aw0U2V/nh8SA5uv95tJ2Yi33SfNzfvlVwxnm+XA4uuSqYeFH8ggYc8Hy06SvUy2drw85CC46tly6OB3Ilk3AG8995jMk1s6wdcMRzPP+XrLz5pC29aBh6j4=
script:
- docker-compose --version
- docker-compose -f docker-compose-dev.yml pull
- docker-compose -f docker-compose-dev.yml build
- echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
- docker build -t registry.gitlab.com/weskerfoot/kettleblog:$(git log -1 --pretty=%h) .
- docker push registry.gitlab.com/weskerfoot/kettleblog:$(git log -1 --pretty=%h)
