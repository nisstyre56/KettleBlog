language: python
warnings_are_errors: false
before_install:
- curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
- sudo add-apt-repository "deb [arch=amd64] https://download.docker.com/linux/ubuntu
  $(lsb_release -cs) stable"
- sudo apt-get update
- sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-ce
env:
  DOCKER_COMPOSE_VERSION: 1.24.1
  global:
  - secure: OM3swjeoutGDOnjw94cMugZTJLLZIYz8SilEth0RB04CBRCLtA3nsjC8fLD97tbwlmGtHePajTc60tVsooFWMAvlfr5+cJurqbDQHl1DPfvurWhzbR7d3sqIQAhIDEBj+FQO6FxQP8sJko9Ol/wEo8TdjQpmOzxlIf8KtBqGRA5bRz66nD5a4yJKleHFY0TRfk+5H8Z6g3dMTdKSBzp5yx4P2m08a4fWsI1m3VzMbOMlK2oRWOORHYLQnbbd6l7HYs0BQrANlVqlcTQtc6XliCAlJfjTJt8rmZtdX3H1pS34xIC047kp+5FmbB5AIjg03xtrIK5Vv2F4jtLSzfDZCn9kpjxAKzhllSYUrSNf2S1VGpjRwa5xrSd7P9bfDqt6wQx/crpxwCbfvIOsJEA1NAg9cn6CdfqkENTV2ysKdg3rQ9kXgIdBvhEfxAANuQKVE9Xteoxm6ylxXb54Ln3cZ1g+axmh0BI0LNmvT4Me4HW1jVLwY9f6KQCbrwGFPZwq59w2NerSxkbbzRYWq0B8cD16Mn9kte72+XdaVarnh0UlGiioBDFy1Dp0Adf7J87gyLh+sSB08NYWRtjIhW5ZHY8N8eoCSyptdesSzQBZcpo5779MVgwopf8h6+K2WFwlP+jT8isEPX2dCHAeLLJmkocaeWGc2upyG/l8XdCyWHo=
  - secure: AlJ+UUZSRktzTyJ1j9/4JQEx2JDQY4fPIhxmu1z/WyUxhQW2H2leoEzmGJhO8BP2q2CuTR11EebXfWAmr494wEPKKrbsJNHgpMSJPuhMNN2M8quovAAF79M5kh2UKnFC6qZ9wMkrf3Zo3x8moEPOl8YUNaltHYSJai467fWtVSiSpg+vCVqyvH6CucLWM8FB1W3SxIC52pp55gVtpHR9ZTLoYtTUxWDapkPdrWdeTsYl8VgVGIf2jaqWPsVX6VFwteQM/5UNGCQz7lrioyLRKI+hH6AqBZySpohfkBfzaUmnjADmEnuW3pD59e/uRXwEWNNAGqyHT0ubmrsyVswrX1p+fRRch3riZTVX5O/fI+SyAOcyXElsQAlvj9YJjjCuNj0X6sQKhB+ejqOok6s1p9c/aprFXQiBSbYjLa/Ugibz70Ccei1htULoCFAQEOtTLW0OP8c5ZdCioxMxBpZOgYH1u1VuvzpOTVpcQICwGlJsZWT1aX1RQQJwanqbrTPiiMBotSaft02do+riZcCVVtuOMQcwUVTWcYMPZkXqknWWf956zMLE/0rEpK+ioxKzrfVJfV8S/jtKNnT8RyqMMJLms0FS6kGtS56RghPjLMWfv2hHrYga+RT4dASBsyzCbH/n+xqBQJvHTIC6rqLlPn+pLwtDA84mymfIzBWxnQE=
  - secure: C+Q+AOMAkcSpfgGERUgIQut2CkmAXoRs32E3lXr47yQKE1yapZIORfMipVW35QvBKwoDWYkxvu74esCkcTvShGrzgjwJuBtdOskhzQzZkCXzDrYiR2flfzdBqiVKnN0EslnBRvGM2R4yNQVyoPSWh2uzY8bu2UYgRzi9Idxc4Gi7EbR6EAS17ET6vCKYlMKovxgE+yCDNLaoqvZAUuVbJwPMvBVk4iAvzi7Rg9I4I7MKkOtRGkceA4rpdlW2eQS1apXcpReRXtclZ8K9JwOzeJp78FivlHmdaZNO/XoJa8QjaIRnMAo/ddTgrXJuz2awxEoH5LQRAgMR56V0QBd1PSM66qCm8sF8gsCm9I0B/RJbpoeDZcWnQlngHusGqtbwqGU2L89LmjQEGDrm5dGwMleo6XVqDNM13OG38xymP8/UojEMoH06bvHq+3HiJAWdJSS0xJvGilqfgr1CHtR1PJ+w98TyXlLEwDZRKQxMQzjBsXYCDM2O6WXFeIJ/SVNMFH2Tzd/W+/VX6yLdNktSQKSOzaM43MZ55HasW0VUj88FVYODoezI3ea1mT4Z82aE8qU7W1GHIt1VXHunMs7zAZRCvbtDgeK4aY4T0twhJPiU+lbnhcfD9q4p8enRZ3mHOH8VRii0fF+i7oJAZoqxncRLhK2dKqmxu9vthQ5jVqg=
  - secure: q0X8a+AU+U/zuwX3etRYejva9+9jO1MaA9sHKNGPBTeWzL/HtaWiuPFKdOComurJ162Bqrx8dUNLQLR1ZS2/8NAZGTOF0403alem/6s49DUzksQxRCRuXEb9a6RrY99taTOTjOR9czPuoC1v8nzU2RqfuYchKls4Jr/DGBF7i6FGnhosY5Ycm5e1nUv7VSNlopSVbtYZBjeO5qMTXQYOVmLOCUxjQ+lVBD5pyGhBYmny/0mdg1S8BHz9fH+x/sokUGYo34qrHVFg61bjz53pIxmmoeZqUiCtvqy2gyeZqUO3ZteBxVqjSDkVzQ1OC9PwBuVeRnyYErQdIT74cloA+gxEs6psZVU3CQ/02TbsydowRlGPllsQZAj4sDX999UxpjQXzGeVy0FZChU+8GFt+E0/lzsGbnUxSR+Le9+h6xn9kiCTx6pATx54fY3j8dSwtyjBcFX4FXtzaWr9RJwCuPzpaPz3MOZfbjSLGJoQyyG755CmtTPWXFN7C7P+89Zvtd+wS9jxSN8MrtoKIg09OegB4CtyKxcd4XRQ1uFLZgTTcjW4BTycdlM7xqD4L2Tzn8dUfvQSdYXu+0OxFM5fxn0ZBns55/VDNMQtKzziSfcAinXvZ15NYE4IepJdBJHxQr3k2Zh+L9Q96AbI6wjRI0rXumsgJPT+B0Iim5N0CE8=
  - secure: cZkUbKwk7jLzNFfFADz38UuAZY4xtZ1kyDkYrFMx0mUzQtVwAiTfwblr31z1fI9XjAsGqANXEYZROvclhX7tOGIYsUVnuS7t4tBegRMjjlCPao/A90b704ZZeK+kMFgTuxo6uND6f5L/QoyiFeqzDljYzJoqqW5GA3E4AgCMhZ6NYWSpmBXoElBwfRznQcuJJDuteNDEnE1vPUS96HIirGvI3O7t34NEkMl93FY+qzaHsBeFGFPEOfK4v+cg7crm4snYhX2FfFvd1/6/MZTlcsslJHxUpiqUfN/8pZh+oQ0UO7053cYxG73tuOE+2n222PtsO5zuZC1CBPORqICbc0RraSn430sfStmhG+1DVurBs9VzSRNo3UMd5ajs7g/b3PWUG/WvTSyaP1QWGflAyjwxUBhkYqZB6l8L0wrQecP4Ifbuq9P23PODf5gsCOFMsco+9o5m20PYeIWgQ5T2wCbJ7bq/hdxMdrsHEKGfqril8JPMM69hyGh3ZTnSQ/EP+uhRugYrr58oDbVqS69TBJofuT/gllakqbWJ2iPPP1brKeWiwpY21X2gsHFL7LOSPA8KDGKf1LL7sKXN+FAy+JMRcg68axJEgjLPHydEdsBvby7uMo/iXb2gTgo1Be9mCzVq69ZDUwcZHS3NJDH0Zn+7S7VJLBFzOyqONjjWcoc=
  - secure: J0tvTqqLiA7y8gibFvPraMxJNjiQdMk4Sfq5WhUngedUGXsrtWKfGi55elJJ87lkN+8cvSkHMBjg2fJ4TFXzC52aEJ/O/81nl2b/IbcjhL3SE+b6klWI7YuywfY1o5NY8V3XxS00xU4JxkAJ/g68M5Jm+r6mMpHklj1fiHmPGX4br4Kdc2EheJQucvDhgCCHc5g3CpOCGPdmIkJorfwFJthuXBnL14XKIFfLWrAGqM/SSYVifNJMhjE70k836HkXVaWN68Ml7b9TccbuY8A5V7S7+SoSvk+MpiHZ9BFS1MDD4LN27xT/MTRKdzNPdMq9/BDRUvnsPtlbKp+nCrqpqauyg314k8c9bv2CLR6wRpNUjCRSbQxmFH5Ye/TiVBLXBf/UdxgNxrMLkIKdc4EGZR62jjv8suaaaZ/LoxrNfvRSYc6Pn6hVwMXaIVbfpnhQi0J+zTMpVaz3JGRYl9A8Rb8NTE8O/pt1sO+uF3mt9dFGBxRUfVJZUXZTcweP8wyKcSlR7KEfPBeNxzQbsUPucWGtuh3ihyrxSUL9f9avFZihMmfxFP1sWxT2q9m/9dCRpSQGdPHKLJQdeK6FNlFvHhULIjTrMeE+sraDA7PiJvlW/pOtJxTQOHELY4NuLCjbdgEinfSmuLZoTBicILv5t6lWCR3wCImIxqRKm86Hf6I=
script:
- docker-compose --version
- echo "$DOCKER_PASSWORD" | docker login registry.gitlab.com --username "$DOCKER_USERNAME"
  --password-stdin
- docker build -t registry.gitlab.com/weskerfoot/kettleblog:$(git log -1 --pretty=%h)
  app
- docker push registry.gitlab.com/weskerfoot/kettleblog:$(git log -1 --pretty=%h)
